<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apache Kafka - Resumen, Spring y Escalabilidad</title>

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 2rem;
      line-height: 1.6;
    }

    h1, h2, h3 {
      color: #222;
    }

    h1 {
      text-align: center;
      border-bottom: 3px solid #ddd;
      padding-bottom: 0.5rem;
      margin-bottom: 2rem;
    }

    section {
      margin-bottom: 2.5rem;
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    ul {
      margin-left: 1.5rem;
    }

    pre {
      background: #f4f4f4;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
    }

    code {
      color: #c7254e;
      background-color: #f9f2f4;
      padding: 2px 4px;
      border-radius: 4px;
    }

    .question {
      background: #f4f4f4;
      border-left: 4px solid #888;
      padding: 1rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }

    .answer {
      margin-top: 0.5rem;
      font-weight: 500;
    }
  </style>
</head>

<body>

<h1>Apache Kafka – Resumen, Spring y Escalabilidad</h1>

<section>
  <h2>1. ¿Qué es Kafka?</h2>
  <p>
    <strong>Apache Kafka</strong> es una plataforma distribuida de
    <strong>event streaming</strong> diseñada para manejar grandes volúmenes
    de eventos en tiempo real de forma escalable y tolerante a fallos.
  </p>

  <ul>
    <li>Alta performance</li>
    <li>Persistencia en disco</li>
    <li>Escalabilidad horizontal</li>
    <li>Arquitectura distribuida</li>
  </ul>
</section>

<section>
  <h2>2. Componentes Principales</h2>

  <ul>
    <li><strong>Broker</strong>: nodo Kafka que almacena datos</li>
    <li><strong>Topic</strong>: canal lógico de eventos</li>
    <li><strong>Partition</strong>: unidad de paralelismo</li>
    <li><strong>Producer</strong>: publica eventos</li>
    <li><strong>Consumer</strong>: consume eventos</li>
    <li><strong>Consumer Group</strong>: grupo de consumidores coordinados</li>
  </ul>
</section>

<section>
  <h2>3. Kafka + Spring Boot</h2>

  <p>
    Spring facilita la integración con Kafka a través de
    <strong>Spring for Apache Kafka</strong>, eliminando código boilerplate
    y ofreciendo configuración declarativa.
  </p>

  <h3>Dependencia Maven</h3>

  <pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;
  &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

  <h3>Producer con Spring</h3>

  <pre><code>@Service
public class OrderProducer {

  private final KafkaTemplate&lt;String, Order&gt; kafkaTemplate;

  public OrderProducer(KafkaTemplate&lt;String, Order&gt; kafkaTemplate) {
    this.kafkaTemplate = kafkaTemplate;
  }

  public void send(Order order) {
    kafkaTemplate.send("orders-topic", order.getId(), order);
  }
}</code></pre>

  <h3>Consumer con Spring</h3>

  <pre><code>@KafkaListener(
  topics = "orders-topic",
  groupId = "order-group"
)
public void consume(Order order) {
  process(order);
}</code></pre>

  <p>
    ✔ Manejo automático de deserialización  
    ✔ Soporte para retries y error handling  
    ✔ Integración nativa con Spring Boot
  </p>
</section>

<section>
  <h2>4. Escalabilidad en Kafka</h2>

  <h3>Escalando Producers</h3>
  <ul>
    <li>Múltiples producers pueden escribir al mismo topic</li>
    <li>Kafka distribuye mensajes entre particiones</li>
  </ul>

  <h3>Escalando Consumers</h3>
  <ul>
    <li>Un consumer por partición dentro de un consumer group</li>
    <li>Para escalar consumo → más particiones</li>
  </ul>

  <pre><code>
Consumers ≤ Partitions
</code></pre>

  <h3>Escalando Brokers</h3>
  <ul>
    <li>Agregar brokers aumenta capacidad y throughput</li>
    <li>Las particiones se redistribuyen automáticamente</li>
  </ul>

  <p>
    ⚠ El número de particiones define el límite máximo de paralelismo
  </p>
</section>

<section>
  <h2>5. Topics y Particiones como Elementos Lógicos</h2>

  <p>
    En Kafka, los topics y particiones no son solo estructuras técnicas,
    sino <strong>elementos de diseño lógico</strong>.
  </p>

  <h3>Diseño de Topics</h3>

  <ul>
    <li>Un topic representa un <strong>tipo de evento</strong></li>
    <li>Ejemplo:
      <ul>
        <li><code>order-created</code></li>
        <li><code>payment-confirmed</code></li>
        <li><code>user-registered</code></li>
      </ul>
    </li>
  </ul>

  <h3>Uso de Keys</h3>

  <p>
    Las <strong>keys</strong> determinan la partición y preservan el orden lógico.
  </p>

  <pre><code>
// Todos los eventos de una orden van a la misma partición
key = orderId
</code></pre>

  <h3>Separación por Contexto</h3>

  <ul>
    <li>Un topic por bounded context</li>
    <li>Evitar usar un solo topic para todo</li>
  </ul>

  <p>
    ✔ Facilita escalabilidad  
    ✔ Mejora el orden lógico  
    ✔ Reduce acoplamiento
  </p>
</section>

<section>
  <h2>6. Preguntas Comunes de Entrevista</h2>

  <div class="question">
    <strong>Q1: How do you scale Kafka consumers?</strong>
    <div class="answer">
      Aumentando el número de particiones y consumidores
      dentro del mismo consumer group.
    </div>
  </div>

  <div class="question">
    <strong>Q2: Why is partition count important?</strong>
    <div class="answer">
      Define el máximo nivel de paralelismo tanto para producers
      como para consumers.
    </div>
  </div>

  <div class="question">
    <strong>Q3: How does Spring Kafka handle message consumption?</strong>
    <div class="answer">
      Mediante @KafkaListener, manejo automático de offsets
      y soporte integrado para error handling.
    </div>
  </div>

  <div class="question">
    <strong>Q4: How do you design topics in Kafka?</strong>
    <div class="answer">
      Basados en eventos de negocio y bounded contexts,
      no en acciones técnicas.
    </div>
  </div>
</section>

<section>
  <h2>7. Summary</h2>

  <p>
    Kafka es una plataforma central para arquitecturas orientadas a eventos.
    Su correcta integración con Spring, junto con un diseño consciente
    de topics y particiones, permite construir sistemas altamente escalables,
    desacoplados y resilientes.
  </p>
</section>

</body>
</html>